En su forma más básica, DNS es un sistema que convierte nombres de dominio en direcciones IP. Es la forma en que los humanos recordarán y clasificarán las cosas resuelta en la forma en que las computadoras prefieren pensar las cosas. Este proceso de utilizar DNS para convertir un nombre de dominio en una dirección IP se conoce como resolución de nombres. Veamos cómo funciona esto más de cerca.

Lo primero que es importante saber es que los servidores DNS son una de las cosas que deben configurarse específicamente en un nodo en una red. Para que una computadora funcione en una red moderna, tiene que tener cierta cantidad de cosas configuradas. Recuerda que las direcciones MAC están hard-coded y vinculadas a piezas específicas de hardware. Pero también vimos que la dirección IP, la máscara de subred, y la puerta de enlace para un host debe estar específicamente configuradas. Un servidor DNS es la cuarta y última parte de la configuración de la red moderna estándar. Estas son casi siempre las cuatro cosas que deben configurarse para que un host funcione en una red de la forma esperada.

Debo señalar que una computadora puede funcionar bien sin DNS o sin un servidor DNS configurado, pero como vimos en el último video, esto dificulta las cosas para cualquier humano que pueda estar usando esa computadora.

Hay cinco tipos principales de servidores DNS: servidores de almacenamiento en caché de nombres, servidores de nombres recursivos, servidores de nombres raíz, servidores de nombres TLD y servidores de nombres autoritativos. A medida que los veamos en profundidad, es importante tomar nota de que un servidor DNS dado puede cumplir muchas de estas funciones a la vez.

Los servidores de almacenamiento en caché y de nombres recursivos son proporcionados generalmente por un ISP o tu red local. Su propósito es almacenar las búsquedas de nombres de dominio durante un cierto tiempo. Como verás en un momento, hay muchos pasos para realizar una resolución completa de un nombre de dominio. Con el fin de evitar que esto suceda cada vez que se establece una nueva conexión TCP, tu ISP o red local generalmente tendrán un servidor de almacenamiento en caché de nombres disponible. La mayoría de estos servidores también son servidores de nombres recursivos.

Los servidores de nombres recursivos son los que realizan solicitudes de resolución de DNS completas. En la mayoría de los casos, tu servidor de nombres local realizará las tareas de ambos, pero definitivamente es posible que un servidor de nombres sea solo de almacenamiento en caché o solo recursivo.

Vamos a presentar un ejemplo para explicar mejor cómo funciona esto. Tu amigo y tú están conectados a la misma red y ambos quieren ir a Facebook.com. Tu amigo escribe "www.facebook.com" en un navegador web, lo que significa que su computadora ahora necesita saber la IP de www.facebook.com para establecer una conexión. Ambas computadoras están en la misma red, lo que por lo general implica que ambas fueron configuradas con el mismo servidor de nombres. La computadora de tu amigo pide al servidor de nombres la IP de www.facebook.com, pues no la conoce. Este servidor de nombres ahora realiza una resolución completamente recursiva para detectar la IP correcta para www.facebook.com. Esto implica un montón de pasos que veremos en un momento. Esta IP se entrega a la computadora de tu amigo y se almacena localmente en una memoria caché.

Unos minutos más tarde, tú escribes "www.facebook.com" en un navegador web. Nuevamente, tu computadora necesita conocer la IP de este dominio, así que le pregunta al servidor de nombres local con el que está configurada, que es el mismo con el que la computadora de tu amigo estuvo en comunicación. Como recién hubo una búsqueda del nombre de dominio www.facebook.com, el servidor de nombres local todavía tiene la IP que resolvió almacenar y puede entregarla a tu computadora sin tener que realizar una búsqueda completa. Así es como los mismos servidores actúan como servidor de almacenamiento en caché.

Todos los nombres de dominio en el sistema DNS global tienen un TTL o tiempo de vida. Este es un valor en segundos que el propietario de un nombre de dominio puede configurar para indicar cuánto tiempo se permite que un servidor de nombres almacene una entrada en la memoria caché antes de que deba descartarla y volver a realizar una resolución completa. Hace varios años, era normal que estos TTL fueran realmente largos, a veces un día completo o más. Esto se debe a que el ancho de banda general disponible en Internet era mucho menor, así que los administradores de red no querían desperdiciar el ancho de banda disponible para realizar búsquedas de DNS completas constantemente. A medida que Internet fue creciendo y volviéndose más veloz, estos TTL para la mayoría de los dominios se redujeron a un valor entre unos minutos a unas horas. Pero es importante saber que, a veces, podrías encontrar nombres de dominios con TTL muy largos, lo que significa que puede llevar la duración completa de un TTL para que Internet en su totalidad conozca un cambio en el registro de DNS.

Ahora, veamos que sucede cuando tu servidor recursivo local necesita realizar una resolución recursiva completa. El primer paso es siempre contactar con un servidor llamado raíz; hay 13 servidores raíz de nombres en total y son responsables de dirigir las consultas hacia el servidor de nombres TLD apropiado. En el pasado, estos 13 servidores raíz se distribuían en regiones geográficas muy específicas, pero hoy en día, se distribuyen principalmente en todo el mundo a través de la difusión por proximidad (Anycast). Anycast es una técnica que se utiliza para enrutar el tráfico a diferentes destinos dependiendo de factores como la ubicación, la congestión o el estado del enlace. Con Anycast, una computadora puede enviar un datagrama a una IP específica, pero podría verlo enrutado a uno de los muchos destinos reales diferentes dependiendo de algunos factores.

Esto también debería dejar claro que, en realidad, ya no hay solo 13 servidores de nombres de rutas físicas. Es mejor pensar en ellos como 13 autoridades que ofrecen las búsquedas de nombre de ruta como un servicio. Los servidores raíz responderán a una búsqueda de DNS con el servidor de nombres TLD que se debe consultar. TLD significa dominio de nivel superior y representa la parte superior del sistema jerárquico de resolución de nombres DNS. Un TLD es la última parte de cualquier nombre de dominio: tomando www.facebook.com como ejemplo otra vez, la porción ".com" debe considerarse el TLD. Vamos a entrar en más detalles sobre los diferentes componentes de un nombre de dominio en una próxima lección.

Para cada TLD en existencia, hay un servidor de nombres TLD, pero al igual que con los servidores raíz, esto no significa que solo haya físicamente un servidor en cuestión. Es muy probable que sea una distribución global de servidores Anycast accesibles, responsables de cada TLD.

Los servidores de nombres TLD responderán de nuevo con un redireccionamiento, esta vez informando a la computadora que realiza la búsqueda de nombres con qué servidor de nombres autoritativo debe contactarse. Los servidores de nombres autoritativos son responsables de las dos últimas partes de cualquier nombre de dominio, que es la resolución en la que una sola organización puede ser responsable de las búsquedas de DNS. Tomando www.weather.com como ejemplo, el servidor de nombres de TLD apuntaría una búsqueda al servidor autoritativo para Weather.com, que probablemente esté controlado por The Weather Channel, la organización que dirige el sitio.

Por último, la búsqueda de DNS podría redirigirse al servidor autoritativo para weather.com que, en última instancia, proporcionaría la IP real del servidor en cuestión. Esta jerarquía estricta es muy importante para la estabilidad de Internet, ya que garantiza que todas las resoluciones completas de DNS pasan por una serie de búsquedas estrictamente reguladas y controladas para obtener las respuestas correctas, y es la mejor manera de proteger contra actores maliciosos que redireccionan el tráfico.

Tu computadora enviará ciegamente el tráfico a cualquier IP que se le indique. Al usar un sistema jerárquico controlado por entidades confiables en la forma en que lo hace el DNS, podemos garantizar mejor que las respuestas a las búsquedas de DNS sean precisas.

Ahora que ves cuántos pasos están involucrados, tiene sentido que confiemos en que nuestros servidores de nombres locales almacenen las búsquedas de DNS en caché. Es para no tener que hacer una búsqueda de ruta completa para cada conexión TCP. De hecho, tu computadora local, desde tu teléfono a un equipo de escritorio, generalmente también tendrá su propia memoria caché DNS temporal. De esa manera, tampoco tiene que molestar a su servidor de nombres local para cada conexión TCP.
