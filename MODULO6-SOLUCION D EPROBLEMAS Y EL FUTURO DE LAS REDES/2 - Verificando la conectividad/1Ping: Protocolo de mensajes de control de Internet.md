Cuando surgen problemas de red, el inconveniente más común que encontrarás es la imposibilidad de establecer una conexión con algo. Puede ser un servidor al que no se puede acceder o un sitio web que no carga. Tal vez solo puedas alcanzar tu recurso en tu LAN y no puedas conectarte a nada en Internet. Sea cual fuere el problema, ser capaz de diagnosticar inconvenientes de conectividad es una parte importante de la solución de problemas de red. Al final de esta lección, podrás usar una serie de importantes herramientas de solución de problemas que te ayudarán a resolverlos.

Cuando se produce un error de red, el dispositivo que lo detecta necesita alguna forma de comunicarlo al origen del tráfico en problemas. Podría ser que un router no sepa cómo enrutar a un destino o que un determinado puerto no esté disponible. Incluso podría ser que el TTL de un datagrama IP haya expirado y no se intenten más saltos de router. En todas estas situaciones y más, se usa el Protocolo de mensajes de control de Internet, o ICMP, para comunicar estos problemas.

ICMP es utilizado principalmente por routers o hosts remotos para comunicarle al origen de la transmisión que esta falló. La composición de un paquete ICMP es bastante simple. Tiene un encabezado con algunos campos y una sección de datos que el host usa para averiguar cuál de sus transmisiones generó el error.

El primer campo es el campo de tipo, mide 8 bits y especifica qué tipo de mensaje se entrega. Algunos ejemplos son "destino inaccesible" o "tiempo excedido". Inmediatamente después viene el campo de código, que indica una razón más específica para el mensaje que solo el tipo. Por ejemplo, para el tipo "destino inaccesible", hay códigos individuales para cosas como red de destino inaccesible y puerto de destino inaccesible.

Después de esto hay una suma de verificación de 16 bits que funciona como cualquier otro de los campos de suma de verificación que vimos. El siguiente es un campo de 32 bits con un nombre muy poco inspirado, "resto del encabezado". Creíste que podrían inventar algo un poco más interesante, pero realmente no se me ocurre nada bueno. ¿Quién soy yo para juzgar? De todos modos, este campo lo usan opcionalmente algunos de los tipos y códigos específicos para enviar más datos.

Después de esto viene la carga útil de datos para un paquete ICMP. El motivo por el que existe la carga útil de un paquete ICMP es para que el destinatario del mensaje sepa cuál de sus transmisiones hizo que se reportará el error. Contiene todo el encabezado IP y los primeros 8 bytes de la sección de carga útil de datos del paquete infractor.

ICMP no se desarrolló para interacción con los humanos, sino para que estos tipos de mensajes de error se puedan entregar automáticamente entre computadoras en red. Pero, también hay una herramienta específica y dos tipos de mensajes que son muy útiles para los operadores humanos. Esta herramienta se llama ping.

Existe una versión de ella en casi todos los sistemas operativos desde hace mucho tiempo. Ping es un programa super simple y sus conceptos básicos son los mismos, más allá del sistema operativo que uses. Ping te permite enviar un tipo especial de mensaje ICMP llamado solicitud de eco (Echo Request). Una solicitud de eco ICMP, básicamente, solo pregunta al destino: "¿Hola, estás ahí?". Si el destino está en funcionamiento y puede comunicarse en la red, devolverá un tipo de mensaje de respuesta de eco (Echo Reply) de ICMP.

Puedes invocar el comando ping desde la línea de comandos de cualquier sistema operativo moderno. En su uso más básico, simplemente escribes ping y una IP de destino o un nombre de dominio completo. Si no sabes cómo usar una línea de comandos en un sistema operativo, no te preocupes, pronto lo harás. Lo aprenderemos en otro curso.

La salida del comando ping es muy similar en cada uno de los diferentes sistemas operativos. En general, cada línea de la salida mostrará la dirección que envía la respuesta de eco ICMP y cuánto tardaron las comunicaciones de ida y vuelta. También tendrás el TTL restante y el tamaño del mensaje ICMP en bytes. Una vez que el comando termina, también se mostrarán algunas estadísticas como el porcentaje de paquetes transmitidos y recibidos, el tiempo promedio de ida y vuelta, y un par de otras cosas por el estilo. En Linux y Mac OS, el comando ping se ejecutará hasta que sea interrumpido por un usuario final que envía un evento de interrupción. Lo hace presionando la tecla de control y la tecla C al mismo tiempo. En Windows, ping solo envía cuatro solicitudes de eco de manera predeterminada. En todos los entornos, ping admite una serie de marcas de línea de comando que te permiten cambiar su comportamiento, como qué cantidad de solicitudes de eco enviar, qué tamaño deben tener y con qué rapidez se las debe enviar. Consulta la documentación de tu sistema operativo para aprender un poco más.
