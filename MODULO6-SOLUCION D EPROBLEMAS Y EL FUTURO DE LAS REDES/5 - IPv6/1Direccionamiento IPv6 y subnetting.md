Es momento para una verdadera charla. Esta es la cruel verdad:

IANA no tiene más direcciones IP. Cuando IPv4 se desarrolló por primera vez, se eligió un número de 32 bits para representar la dirección de un nodo en una red. Era la infancia de Internet y nadie realmente esperaba que su popularidad explotara como lo ha hecho. Se eligieron 32 bits, pero no es suficiente espacio para el número dispositivos con conexión a Internet que tenemos en el mundo.

IPv6 se desarrolló exactamente debido a este problema. A mediados de la década de 1990, era cada vez más obvio que nos íbamos a quedar sin espacio de direcciones IPv4 en algún momento. Así, se desarrolló un nuevo protocolo de Internet, el Protocolo de Internet versión 6, o IPv6.

Podrías preguntarte qué le ocurrió a la versión 5, o IPv5. En realidad es algo curioso. IPv5 fue un protocolo experimental que introdujo el concepto de conexiones. Nunca tuvo una amplia adopción y el estado de conexión se manejó mejor más tarde con la capa de transporte y TCP. Aunque IPv5 es sobre todo una reliquia, cuando comenzó el desarrollo de IPv6, por consenso se decidió no reutilizar el nombre IPv5.

La mayor diferencia entre la versión 4 (IPv4) y la versión 6 (IPv6) es el número de bits reservados para una dirección. Mientras que las direcciones IPv4 tienen 32 bits, lo que significa que puede haber unos 4,200 millones de direcciones, las direcciones IPv6 miden 128 bits. Esta diferencia de tamaño es asombrosa una vez que haces los cálculos. No te preocupes, no te lo haremos calcular. 2 a la potencia 128 dará como resultado un número de 39 dígitos de largo. Ese rango de números tiene un nombre que probablemente nunca hayas escuchado: un undecillón.

Un undecillón no es un número que escuches a menudo porque es descomunal. Realmente no hay cosas que existan a esa escala. Algunas conjeturas sobre el número total de átomos que forman todo el planeta Tierra y cada cosa en él entra en ese rango de números. Eso debería darte una idea de que estamos hablando de un número muy, muy grande. Si podemos darle a cada átomo en la Tierra su propia dirección IP, probablemente estemos bien en lo que respecta a dispositivos de red durante mucho tiempo.

Solo por diversión, veamos a qué se parece ese número en realidad. Se parece a esto. Guau, alucinante, ¿verdad?

Así como una dirección IPv4 es en realidad solo un número binario de 32 bits, las direcciones IPv6 son en realidad solo números binarios de 128 bits. Las direcciones IPv4 están escritas en cuatro octetos de números decimales solo para hacerlas un poco más legibles para los humanos. Pero tratar de hacer lo mismo para una dirección IPv6 simplemente no funcionaría. En cambio, las direcciones IPv6 se escriben generalmente en 8 grupos de 16 bits cada uno. Cada uno de estos grupos está compuesto por cuatro números hexadecimales. Una dirección IPv6 completa podría verse más o menos así.

Eso sigue siendo demasiado largo, por lo que IPv6 tiene un método de notación que nos permite simplificar eso aún más. Una forma de mostrar cuántas direcciones IPv6 hay es mirando nuestro ejemplo de IP. Cada dirección IPv6 que comienza con 2001:0db8 fue reservada para documentación y educación, o para libros y cursos como este. Son más de 18 quintillones de direcciones, mucho más grande que todo el espacio de direcciones IPv4, reservadas solo para este fin.

Cuando se trata de acortar una dirección IPv6, tenemos dos reglas. La primera es que puedes quitar todos los ceros a la izquierda de un grupo. La segunda es que cualquier cantidad de grupos consecutivos formados por solo ceros se puede reemplazar escribiendo dos veces dos puntos. Debo señalar que esto solo puede suceder una vez para cualquier dirección específica. De lo contrario, no podrías saber exactamente cuántos ceros se reemplazaron con los dos puntos dobles.

Para esta IP, podríamos aplicar la primera regla y eliminar todos los ceros iniciales de cada grupo. Quedaríamos con esto. Una vez que aplicamos la segunda regla, que es reemplazar secciones consecutivas que contienen solo ceros con dos puntos, terminaremos con esto. Esto todavía no es tan legible como una dirección IPv4, pero es un buen sistema que ayuda a reducir la longitud un poco.

Podemos ver este enfoque adoptado llevado al extremo con una dirección de loopback IPv6. Tal vez recuerdes que con IPv4, esta dirección es 127.0.0.1. Con IPv6, la dirección de loopback se representa con 31 ceros con un 1 al final, lo que se puede condensar en su totalidad hasta quedar con ::1.

El espacio de direcciones IPv6 tiene varios otros rangos de direcciones reservadas además de las reservadas para fines de documentación o para la dirección de loopback. Por ejemplo, cualquier dirección que comienza con FF00:: se usa para multidifusión, que es una forma de dirigirse a muchos grupos de hosts a la vez. También es bueno saber que las direcciones que comienzan con FE80:: se usan para unidifusión de enlace local. Las direcciones de unidifusión de enlace local permiten comunicaciones de segmento de red local y se configuran con base en la dirección MAC de un host. Un host IPv6 usa direcciones de enlace local para recibir su configuración de red, que es muy parecido a cómo funciona DHCP. La dirección MAC del host se ejecuta a través de un algoritmo para convertirla de un número de 48 bits en un número único de 64 bits. Luego se inserta en la ID del host de la dirección.

El espacio de direcciones IPv6 es tan grande que nunca hubo necesidad de pensar en dividirlo en clases de direcciones como hacemos con IPv4. Desde el principio, una dirección IPv6 trazó una línea muy simple entre la ID de red y la ID de host. Los primeros 64 bits de cualquier dirección IPv6 son la ID de la red, los segundos 64 bits de cualquier dirección IPv6 son la ID de host. Esto significa que cualquier red IPv6 dada tiene espacio para más de 9 quintillones de hosts. Sin embargo, a veces los ingenieros de redes podrían querer dividir su red a efectos administrativos. La división en subredes IPv6 usa la misma notación CIDR con la que estás familiarizado. Esto se usa para definir una máscara de subred contra la porción de ID de red de una dirección IPv6.
